<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ö–µ–º –±–æ—Ç–æ–≤</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px;
            background: #fafafa;
        }
        .success { color: #22c55e; font-weight: bold; }
        .error { color: #ef4444; font-weight: bold; }
        .warning { color: #f59e0b; font-weight: bold; }
        pre { 
            background: #1f2937; 
            color: #f3f4f6;
            padding: 15px; 
            overflow-x: auto; 
            border-radius: 5px;
            font-size: 12px;
            max-height: 400px;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
        button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-ok { background: #22c55e; }
        .status-error { background: #ef4444; }
        .status-warning { background: #f59e0b; }
        .status-pending { background: #6b7280; }
        h1 { color: #1f2937; }
        h2 { color: #374151; border-bottom: 2px solid #e5e7eb; padding-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ö–µ–º –±–æ—Ç–æ–≤</h1>
        <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ–∂–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ö–µ–º –±–æ—Ç–æ–≤ –≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.</p>
        
        <div class="test-section">
            <h2><span id="status1" class="status-indicator status-pending"></span>1. –¢–µ—Å—Ç API /api/bots</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –±–æ—Ç–æ–≤</p>
            <button onclick="testBotsAPI()">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤</button>
            <div id="bots-result"></div>
        </div>

        <div class="test-section">
            <h2><span id="status2" class="status-indicator status-pending"></span>2. –¢–µ—Å—Ç API /api/bots/01_main_test_bot</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º</p>
            <button onclick="testBotAPI()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞</button>
            <div id="bot-result"></div>
        </div>

        <div class="test-section">
            <h2><span id="status3" class="status-indicator status-pending"></span>3. –¢–µ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å—Ö–µ–º—ã</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç ReactFlow</p>
            <button onclick="testSchemaConversion()">–¢–µ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</button>
            <div id="conversion-result"></div>
        </div>

        <div class="test-section">
            <h2><span id="status4" class="status-indicator status-pending"></span>4. –¢–µ—Å—Ç —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ –≤ –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö</p>
            <button onclick="testNodeTypes()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã —É–∑–ª–æ–≤</button>
            <div id="node-types-result"></div>
        </div>

        <div class="test-section">
            <h2><span id="status5" class="status-indicator status-pending"></span>5. –¢–µ—Å—Ç React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</p>
            <button onclick="testReactApp()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
            <div id="react-result"></div>
        </div>

        <div class="test-section">
            <h2>üéØ –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h2>
            <button onclick="runAllTests()" style="background: #10b981;">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
            <button onclick="clearResults()" style="background: #6b7280;">–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            <button onclick="openReactEditor()" style="background: #8b5cf6;">–û—Ç–∫—Ä—ã—Ç—å React —Ä–µ–¥–∞–∫—Ç–æ—Ä</button>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
        function setStatus(testNumber, status) {
            const indicator = document.getElementById(`status${testNumber}`);
            indicator.className = `status-indicator status-${status}`;
        }

        async function testBotsAPI() {
            const resultDiv = document.getElementById('bots-result');
            resultDiv.innerHTML = '<div style="color: #6b7280;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            setStatus(1, 'pending');
            
            try {
                const response = await fetch('/api/bots');
                const data = await response.json();
                
                if (response.ok) {
                    setStatus(1, 'ok');
                    const botsCount = data.success && data.data && data.data.bots ? data.data.bots.length : 0;
                    resultDiv.innerHTML = `
                        <div class="success">‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ${botsCount} –±–æ—Ç–æ–≤</div>
                        <details>
                            <summary>–ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (${JSON.stringify(data).length} —Å–∏–º–≤–æ–ª–æ–≤)</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    `;
                } else {
                    setStatus(1, 'error');
                    resultDiv.innerHTML = `
                        <div class="error">‚ùå –û—à–∏–±–∫–∞ HTTP: ${response.status}</div>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                setStatus(1, 'error');
                resultDiv.innerHTML = `
                    <div class="error">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}</div>
                `;
            }
        }

        async function testBotAPI() {
            const resultDiv = document.getElementById('bot-result');
            resultDiv.innerHTML = '<div style="color: #6b7280;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            setStatus(2, 'pending');
            
            try {
                const response = await fetch('/api/bots/01_main_test_bot');
                const data = await response.json();
                
                if (response.ok) {
                    setStatus(2, 'ok');
                    const bot = data.success ? data.data : data;
                    const hasConfiguration = bot.configuration && bot.configuration.nodes;
                    const nodeCount = hasConfiguration ? bot.configuration.nodes.length : 0;
                    
                    resultDiv.innerHTML = `
                        <div class="success">‚úÖ –ë–æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ</div>
                        <div><strong>–ò–º—è:</strong> ${bot.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                        <div><strong>ID:</strong> ${bot.id || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                        <div><strong>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</strong> ${hasConfiguration ? `${nodeCount} —É–∑–ª–æ–≤` : '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}</div>
                        <details>
                            <summary>–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ö–µ–º—É –±–æ—Ç–∞</summary>
                            <pre>${JSON.stringify(bot.configuration || {}, null, 2)}</pre>
                        </details>
                        <details>
                            <summary>–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</summary>
                            <pre>${JSON.stringify(bot, null, 2)}</pre>
                        </details>
                    `;
                } else {
                    setStatus(2, 'error');
                    resultDiv.innerHTML = `
                        <div class="error">‚ùå –û—à–∏–±–∫–∞ HTTP: ${response.status}</div>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                setStatus(2, 'error');
                resultDiv.innerHTML = `
                    <div class="error">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}</div>
                `;
            }
        }

        function testSchemaConversion() {
            const resultDiv = document.getElementById('conversion-result');
            setStatus(3, 'pending');
            
            // –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∏–∑ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞
            const testConfiguration = {
                nodes: [
                    {
                        id: "node_start",
                        type: "command",
                        position: { x: 100, y: 100 },
                        config: {
                            command: "/start",
                            description: "–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"
                        }
                    },
                    {
                        id: "node_welcome",
                        type: "send_message",
                        position: { x: 300, y: 100 },
                        config: {
                            text: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
                            parse_mode: "none"
                        }
                    }
                ],
                connections: [
                    {
                        id: "conn_1",
                        sourceNodeId: "node_start",
                        sourceOutput: "output",
                        targetNodeId: "node_welcome",
                        targetInput: "input"
                    }
                ]
            };

            // –§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
            const convertNodeType = (nodeType) => {
                const typeMapping = {
                    'command': 'trigger-command',
                    'send_message': 'action-send-message',
                    'random_number': 'data-variable-set',
                    'text_input': 'trigger-message',
                    'condition': 'condition-text-contains'
                };
                return typeMapping[nodeType] || 'action-send-message';
            };

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
            const expectedNodeTypes = [
                'trigger-command',
                'action-send-message',
                'condition-text-contains',
                'data-variable-set'
            ];

            try {
                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —É–∑–ª—ã
                const convertedNodes = testConfiguration.nodes.map(node => ({
                    id: node.id,
                    type: convertNodeType(node.type),
                    position: node.position || { x: 0, y: 0 },
                    data: {
                        label: node.config?.command || node.config?.text || node.type,
                        ...node.config
                    }
                }));

                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
                const convertedEdges = testConfiguration.connections.map(conn => ({
                    id: conn.id,
                    source: conn.sourceNodeId,
                    target: conn.targetNodeId,
                    sourceHandle: conn.sourceOutput,
                    targetHandle: conn.targetInput
                }));

                setStatus(3, 'ok');
                resultDiv.innerHTML = `
                    <div class="success">‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ</div>
                    <div><strong>–£–∑–ª–æ–≤ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ:</strong> ${convertedNodes.length}</div>
                    <div><strong>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ:</strong> ${convertedEdges.length}</div>
                    <details>
                        <summary>–ò—Å—Ö–æ–¥–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</summary>
                        <pre>${JSON.stringify(testConfiguration, null, 2)}</pre>
                    </details>
                    <details>
                        <summary>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–∑–ª—ã</summary>
                        <pre>${JSON.stringify(convertedNodes, null, 2)}</pre>
                    </details>
                    <details>
                        <summary>–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</summary>
                        <pre>${JSON.stringify(convertedEdges, null, 2)}</pre>
                    </details>
                `;
            } catch (error) {
                setStatus(3, 'error');
                resultDiv.innerHTML = `
                    <div class="error">‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: ${error.message}</div>
                    <pre>${error.stack}</pre>
                `;
            }
        }

        function testNodeTypes() {
            const resultDiv = document.getElementById('node-types-result');
            setStatus(4, 'pending');

            // –û–∂–∏–¥–∞–µ–º—ã–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤ –∏–∑ CustomNodes/index.ts
            const expectedTypes = [
                'trigger-message',
                'trigger-command', 
                'trigger-callback',
                'trigger-inline',
                'action-send-message',
                'action-send-photo',
                'action-send-video',
                'action-edit-message',
                'condition-text-contains',
                'condition-text-equals',
                'condition-user-role',
                'data-save',
                'data-load',
                'data-variable-set',
                'integration-http',
                'scenario-welcome'
            ];

            // –¢–∏–ø—ã –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞ –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
            const actualTypes = [
                'trigger-command',    // command -> trigger-command
                'action-send-message' // send_message -> action-send-message
            ];

            const results = {
                expected: expectedTypes.length,
                actual: actualTypes.length,
                matching: actualTypes.filter(type => expectedTypes.includes(type)),
                missing: actualTypes.filter(type => !expectedTypes.includes(type))
            };

            if (results.missing.length === 0) {
                setStatus(4, 'ok');
                resultDiv.innerHTML = `
                    <div class="success">‚úÖ –í—Å–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã</div>
                    <div><strong>–û–∂–∏–¥–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤:</strong> ${results.expected}</div>
                    <div><strong>–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–∏–ø–æ–≤:</strong> ${results.actual}</div>
                    <div><strong>–°–æ–≤–ø–∞–¥–∞—é—â–∏—Ö:</strong> ${results.matching.length}</div>
                    <details>
                        <summary>–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤</summary>
                        <pre>${JSON.stringify(expectedTypes, null, 2)}</pre>
                    </details>
                `;
            } else {
                setStatus(4, 'warning');
                resultDiv.innerHTML = `
                    <div class="warning">‚ö†Ô∏è –ù–∞–π–¥–µ–Ω—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Ç–∏–ø–∞—Ö —É–∑–ª–æ–≤</div>
                    <div><strong>–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã:</strong> ${results.missing.join(', ')}</div>
                    <div><strong>–°–æ–≤–ø–∞–¥–∞—é—â–∏–µ —Ç–∏–ø—ã:</strong> ${results.matching.join(', ')}</div>
                    <details>
                        <summary>–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</summary>
                        <pre>${JSON.stringify(results, null, 2)}</pre>
                    </details>
                `;
            }
        }

        async function testReactApp() {
            const resultDiv = document.getElementById('react-result');
            resultDiv.innerHTML = '<div style="color: #6b7280;">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞...</div>';
            setStatus(5, 'pending');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                const response = await fetch('/');
                
                if (response.ok) {
                    const html = await response.text();
                    const hasReactRoot = html.includes('id="root"') || html.includes('id="app"');
                    const hasReactScripts = html.includes('react') || html.includes('vite') || html.includes('bundle');
                    
                    if (hasReactRoot) {
                        setStatus(5, 'ok');
                        resultDiv.innerHTML = `
                            <div class="success">‚úÖ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                            <div><strong>–ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç:</strong> –ù–∞–π–¥–µ–Ω</div>
                            <div><strong>React —Å–∫—Ä–∏–ø—Ç—ã:</strong> ${hasReactScripts ? '–ù–∞–π–¥–µ–Ω—ã' : '–ù–µ –Ω–∞–π–¥–µ–Ω—ã'}</div>
                            <div><strong>URL —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:</strong> <a href="/editor/01_main_test_bot" target="_blank">/editor/01_main_test_bot</a></div>
                            <details>
                                <summary>–ü–æ–∫–∞–∑–∞—Ç—å HTML (–ø–µ—Ä–≤—ã–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤)</summary>
                                <pre>${html.substring(0, 1000)}...</pre>
                            </details>
                        `;
                    } else {
                        setStatus(5, 'warning');
                        resultDiv.innerHTML = `
                            <div class="warning">‚ö†Ô∏è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ</div>
                            <div><strong>–°—Ç–∞—Ç—É—Å:</strong> ${response.status}</div>
                            <div><strong>–ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç:</strong> –ù–µ –Ω–∞–π–¥–µ–Ω</div>
                        `;
                    }
                } else {
                    setStatus(5, 'error');
                    resultDiv.innerHTML = `
                        <div class="error">‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é: ${response.status}</div>
                    `;
                }
            } catch (error) {
                setStatus(5, 'error');
                resultDiv.innerHTML = `
                    <div class="error">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}</div>
                `;
            }
        }

        function openReactEditor() {
            const url = '/editor/01_main_test_bot';
            window.open(url, '_blank');
        }

        async function runAllTests() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤...');
            await testBotsAPI();
            await new Promise(resolve => setTimeout(resolve, 500));
            await testBotAPI();
            await new Promise(resolve => setTimeout(resolve, 500));
            testSchemaConversion();
            await new Promise(resolve => setTimeout(resolve, 500));
            testNodeTypes();
            await new Promise(resolve => setTimeout(resolve, 500));
            await testReactApp();
            console.log('‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã');
        }

        function clearResults() {
            ['bots-result', 'bot-result', 'conversion-result', 'node-types-result', 'react-result'].forEach(id => {
                document.getElementById(id).innerHTML = '';
            });
            [1, 2, 3, 4, 5].forEach(num => setStatus(num, 'pending'));
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            console.log('üìã –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            console.log('üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ runAllTests() –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö');
        });
    </script>
</body>
</html>