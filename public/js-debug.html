<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .warning { background: #fff3cd; border-color: #ffeaa7; }
        .log { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 3px; font-family: monospace; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üîç JavaScript Debug Tool</h1>
    
    <div id="loadStatus" class="debug-section">
        <h3>üì¶ –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤</h3>
        <div id="loadResults"></div>
    </div>
    
    <div id="functionStatus" class="debug-section">
        <h3>‚öôÔ∏è –°—Ç–∞—Ç—É—Å —Ñ—É–Ω–∫—Ü–∏–π</h3>
        <div id="functionResults"></div>
    </div>
    
    <div id="errorLog" class="debug-section">
        <h3>‚ùå –õ–æ–≥ –æ—à–∏–±–æ–∫</h3>
        <div id="errorResults"></div>
    </div>
    
    <div class="debug-section">
        <h3>üß™ –¢–µ—Å—Ç—ã</h3>
        <button onclick="testCreateBot()">–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞</button>
        <button onclick="testBackToDashboard()">–¢–µ—Å—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –¥–∞—à–±–æ—Ä–¥—É</button>
        <button onclick="testVisualEditor()">–¢–µ—Å—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</button>
        <button onclick="clearLogs()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
    </div>
    
    <div id="testResults" class="debug-section">
        <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤</h3>
        <div id="testLog"></div>
    </div>

    <script>
        const loadResults = document.getElementById('loadResults');
        const functionResults = document.getElementById('functionResults');
        const errorResults = document.getElementById('errorResults');
        const testLog = document.getElementById('testLog');
        
        let errors = [];
        
        function log(message, type = 'info') {
            const time = new Date().toLocaleTimeString();
            const logEntry = `[${time}] ${message}`;
            console.log(logEntry);
            
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.textContent = logEntry;
            testLog.appendChild(div);
            testLog.scrollTop = testLog.scrollHeight;
        }
        
        function checkFileLoad(filename, checkFunction) {
            try {
                const result = checkFunction();
                loadResults.innerHTML += `<div class="success">‚úÖ ${filename}: –ó–∞–≥—Ä—É–∂–µ–Ω</div>`;
                return true;
            } catch (e) {
                loadResults.innerHTML += `<div class="error">‚ùå ${filename}: –û—à–∏–±–∫–∞ - ${e.message}</div>`;
                errors.push(`${filename}: ${e.message}`);
                return false;
            }
        }
        
        function checkFunction(name, func) {
            const exists = typeof func !== 'undefined';
            const status = exists ? 'success' : 'error';
            const icon = exists ? '‚úÖ' : '‚ùå';
            functionResults.innerHTML += `<div class="${status}">${icon} ${name}: ${typeof func}</div>`;
            return exists;
        }
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
        window.addEventListener('error', (e) => {
            const error = `${e.message} –≤ ${e.filename}:${e.lineno}`;
            errors.push(error);
            errorResults.innerHTML += `<div class="error">‚ùå ${error}</div>`;
        });
        
        window.addEventListener('unhandledrejection', (e) => {
            const error = `Promise rejection: ${e.reason}`;
            errors.push(error);
            errorResults.innerHTML += `<div class="error">‚ùå ${error}</div>`;
        });
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function testCreateBot() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ createNewBot()');
            try {
                if (typeof window.createNewBot === 'function') {
                    log('‚úÖ –§—É–Ω–∫—Ü–∏—è createNewBot –Ω–∞–π–¥–µ–Ω–∞', 'success');
                    // –ù–µ –≤—ã–∑—ã–≤–∞–µ–º, —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º
                } else {
                    log('‚ùå –§—É–Ω–∫—Ü–∏—è createNewBot –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                }
            } catch (e) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ createNewBot: ${e.message}`, 'error');
            }
        }
        
        function testBackToDashboard() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ backToDashboard()');
            try {
                if (typeof window.backToDashboard === 'function') {
                    log('‚úÖ –§—É–Ω–∫—Ü–∏—è backToDashboard –Ω–∞–π–¥–µ–Ω–∞', 'success');
                } else {
                    log('‚ùå –§—É–Ω–∫—Ü–∏—è backToDashboard –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                }
            } catch (e) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ backToDashboard: ${e.message}`, 'error');
            }
        }
        
        function testVisualEditor() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ VisualEditor');
            try {
                if (typeof VisualEditor === 'function') {
                    log('‚úÖ –ö–ª–∞—Å—Å VisualEditor –Ω–∞–π–¥–µ–Ω', 'success');
                } else {
                    log('‚ùå –ö–ª–∞—Å—Å VisualEditor –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
            } catch (e) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ VisualEditor: ${e.message}`, 'error');
            }
        }
        
        function clearLogs() {
            testLog.innerHTML = '';
            errors = [];
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JavaScript —Ñ–∞–π–ª–æ–≤...');
                
                checkFileLoad('VisualEditor.js', () => {
                    if (typeof VisualEditor === 'undefined') throw new Error('VisualEditor –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω');
                    return true;
                });
                
                checkFileLoad('app.js', () => {
                    if (typeof BotConstructor === 'undefined') throw new Error('BotConstructor –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω');
                    return true;
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏
                log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π...');
                checkFunction('createNewBot', window.createNewBot);
                checkFunction('backToDashboard', window.backToDashboard);
                checkFunction('editBot', window.editBot);
                checkFunction('BotConstructor', window.BotConstructor);
                checkFunction('VisualEditor', window.VisualEditor);
                
                if (errors.length === 0) {
                    log('üéâ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!', 'success');
                } else {
                    log(`‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–æ ${errors.length} –æ—à–∏–±–æ–∫`, 'warning');
                }
            }, 2000);
        });
    </script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ç–µ –∂–µ —Å–∫—Ä–∏–ø—Ç—ã, —á—Ç–æ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ -->
    <script src="js/VisualEditor.js"></script>
    <script src="app.js"></script>
</body>
</html>