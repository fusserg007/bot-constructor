<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .success { background-color: #d4edda; }
        .error { background-color: #f8d7da; }
    </style>
</head>
<body>
    <h1>üîß Simple Test Bot Constructor</h1>
    
    <div class="test">
        <h3>1. –ë–∞–∑–æ–≤–∞—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h3>
        <p>‚úÖ –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è</p>
    </div>
    
    <div class="test">
        <h3>2. API —Ç–µ—Å—Ç</h3>
        <div id="api-result">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</div>
    </div>
    
    <div class="test">
        <h3>3. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã</h3>
        <div id="files-result">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</div>
    </div>
    
    <div class="test">
        <h3>4. JavaScript –æ—à–∏–±–∫–∏</h3>
        <div id="errors-result">–ù–µ—Ç –æ—à–∏–±–æ–∫</div>
    </div>

    <script>
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
        const errors = [];
        window.addEventListener('error', (e) => {
            errors.push(`${e.message} –≤ ${e.filename}:${e.lineno}`);
            updateErrors();
        });
        
        function updateErrors() {
            const errorsDiv = document.getElementById('errors-result');
            if (errors.length > 0) {
                errorsDiv.innerHTML = errors.map(err => `‚ùå ${err}`).join('<br>');
                errorsDiv.parentElement.classList.add('error');
            }
        }
        
        // –¢–µ—Å—Ç API
        fetch('/api/bots')
            .then(response => response.json())
            .then(data => {
                document.getElementById('api-result').innerHTML = `‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç. –ë–æ—Ç–æ–≤: ${data.data.bots.length}`;
                document.getElementById('api-result').parentElement.classList.add('success');
            })
            .catch(error => {
                document.getElementById('api-result').innerHTML = `‚ùå API –æ—à–∏–±–∫–∞: ${error.message}`;
                document.getElementById('api-result').parentElement.classList.add('error');
            });

        // –¢–µ—Å—Ç —Ñ–∞–π–ª–æ–≤
        Promise.all([
            fetch('/styles.css').then(r => r.ok),
            fetch('/app.js').then(r => r.ok),
            fetch('/js/VisualEditor.js').then(r => r.ok)
        ]).then(results => {
            const filesDiv = document.getElementById('files-result');
            const fileNames = ['styles.css', 'app.js', 'js/VisualEditor.js'];
            const resultText = results.map((ok, i) => 
                `${ok ? '‚úÖ' : '‚ùå'} ${fileNames[i]}`
            ).join('<br>');
            
            filesDiv.innerHTML = resultText;
            
            if (results.every(r => r)) {
                filesDiv.parentElement.classList.add('success');
            } else {
                filesDiv.parentElement.classList.add('error');
            }
        });
    </script>
</body>
</html>