# Устранение проблем с отображением схем

## Быстрое исправление

Если схемы ботов не отображаются в React редакторе:

```bash
# Запустите скрипт автоматического исправления
./fix-schema-display.bat
```

## Ручное исправление

### 1. Проверьте файл конвертера
Убедитесь, что в `frontend/src/utils/dataConverter.ts` строка ~191 содержит:
```typescript
type: convertNodeType(legacyNode.type), // Используем конвертированный тип
```

### 2. Запустите серверы
```bash
# Backend
node server.js

# Frontend (в отдельном терминале)
cd frontend
npm run dev
```

### 3. Тестирование
- Откройте http://localhost:5173
- Загрузите любого бота
- Схема должна корректно отображаться

## Типичные проблемы

### Узлы не отображаются
**Причина**: Несоответствие типов узлов между старой и новой системой
**Решение**: Проверьте маппинг типов в `convertNodeType()`

### Ошибки в консоли браузера
**Причина**: Неправильная регистрация компонентов узлов
**Решение**: Проверьте `nodeTypes` в Editor.tsx

### Схема загружается, но пустая
**Причина**: Проблемы с позиционированием узлов
**Решение**: Проверьте функцию `convertNodeData` полностью

## Маппинг типов узлов

```typescript
// Старые типы -> Новые типы
'trigger' -> 'triggers'
'action' -> 'actions' 
'condition' -> 'conditions'
'data' -> 'data'
'integration' -> 'integrations'
'scenario' -> 'scenarios'
```

## Если проблема не решается

1. Очистите кэш браузера
2. Перезапустите оба сервера
3. Проверьте логи в консоли браузера
4. Убедитесь, что все зависимости установлены: `cd frontend && npm install`